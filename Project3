import sqlite3
 
db = 'artist_artwork_db.sqlite'
 
 
def create_table():
    with sqlite3.connect(db) as conn:  
        conn.execute('CREATE TABLE IF NOT EXISTS artists (
        artistid int, 
        artist_name text, 
        email text,
        unique( artist_name COLLATE NOCASE, email COLLATE NOCASE)
        ')
        
        conn.excute('CREATE TABLE IF NOT EXISTS track_artwork (
        artist_name text, 
        artwork text, 
        price int, 
        available boolean, 
        trackid int,
        unique( artist COLLATE NOCASE, artwork COLLATE NOCASE,
        foreign key(trackid) references artist(artistid)
        ')
    conn.close()
 
 
def insert_example_data():
    with sqlite3.connect(db) as conn:
        conn.execute('INSERT INTO artists values (1, "Pablo Picasso", "Ppicasso@gmail.com")')  # add example artist
        conn.execute('INSERT INTO track_artwork values ("Pabloe Picasso", "The Wheeping Woman", 100000, False, 100)') #add example artwork
    conn.close()
 
 
def display_all_artists():
    conn = sqlite3.connect(db)
    results = conn.execute('SELECT * FROM artists')
    print('All artists listed: ')
    for row in results:
        print(row)  # each row is a tuple
 
    conn.close()
 def display_artwork():
    conn = sqlite3.connect(db)
    search_by_artist = input('Enter Artist Name:')
    result = conn.excute('SELECT * FROM track_artwork WHERE artist_name like ?', (search_by_artist, ))
    if result == none:
        print('There is no artist by that name')
    else:
    print(result)
    return
 
def display_one_artist():
    conn = sqlite3.connect(db)
    artist_info = input('What artist are you looking for?)
    results = conn.execute('SELECT * FROM products WHERE artist_name like ?', (artist_info, ))
    first_row = results.fetchone()
    if first_row:
        print('Your product is: ', first_row) 
    else:
        print('Not found')
 
 
def create_new_artist():
    new_id = int(input('Enter new id: '))
    new_name = input('Artist name: ')
    new_email = input('Artist eamil:')
 
    with sqlite3.connect(db) as conn:
        conn.execute(f'INSERT INTO artists VALUES(?, ?, ?)', (new_id, new_name, new_email))
 
    conn.close()
def create_new_artwork():
    new_id = int(input('Enter new id: '))
    new_name = input('Artist name: ')
    new_email = input('Artist eamil:')
 
    with sqlite3.connect(db) as conn:
        conn.execute(f'INSERT INTO track_artwork VALUES(?, ?, ?)', (new_id, new_name, new_email))
 
    conn.close()
 
def update_product():
    updated_product = 'wool hat'
    update_id = 1000
 
    with sqlite3.connect(db) as conn:
        conn.execute('UPDATE products SET name = ? WHERE id = ? ', (updated_product, update_id))
 
    conn.close()
 
 
def delete_product(product_name):
    with sqlite3.connect(db) as conn:
        conn.execute('DELETE from PRODUCTS WHERE name = ?', (product_name, ))
    conn.close()
 
 
create_table()
insert_example_data()
display_all_data()
display_one_product('jacket')
display_one_product('coat')
create_new_product()
update_product()
delete_product('jacket')
